<!DOCTYPE html>
<html lang="en">
<head>
  <title>Hackathon Project</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="css/animate.css">

  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="css/magnific-popup.css">


  <link rel="stylesheet" href="css/flaticon.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="colorlib-page">
  <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
  <aside id="colorlib-aside" role="complementary" class="js-fullheight">

    <h1 id="colorlib-logo" class="mb-4 mb-md-5"><a href="index.html" style="background-image: url(images/bg_1.jpg);">Anthony Tacquet</a></h1>
    <nav id="colorlib-main-menu" role="navigation">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li class="colorlib-active"><a href="gallery.html">Gallery</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>

    <div class="colorlib-footer">
      <p class="pfooter"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
        Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib.com</a>
        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
    </div>
  </aside> <!-- END COLORLIB-ASIDE -->
  <div id="colorlib-main">
    <section class="ftco-section ftco-no-pt ftco-no-pb">
      <div class="container px-md-0">
        <div class="row d-flex no-gutters">
          <div class="col-lg-12 pb-5 single">
            <div class="row">
              <div class="px-5 mt-4">
                <h1 class="mb-3">Hackathon Project</h1>
                <img class="img w-100" src="images/hackathon/overzicht.jpg">
                <div class="m-5"></div>
                <video class="owl-video-playing w-100" controls>
                  <source src="images/hackathon/overzicht.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <p>The theme of the escape room is a Haunted Castle with several mini model rooms. The goal of the escape room is to solve the puzzle in each room and thus open the door to the next room. Once the last room has been solved, a laser starts in the first room that must be used to use mirrors to dispel the ghost in the last room and thus escape from the castle. However, the ghosts are after you and you only have 10 minutes to solve the entire escape room!</p>

                <p>An LED strip is used in each room to indicate the status of the room:</p>
                <ul>
                  <li>Disabled: the room is inactive, the previous rooms must be finished first.</li>
                  <li>Blue: the game is active in the room.</li>
                  <li>Green: the room has been solved successfully.</li>
                  <li>Red: a mistake was made by the player, this is only temporarily red.</li>
                </ul>
                <p>To indicate to the player the room has been solved, in each room a door will open controlled by a servo motor. The servo motor is mounted to a wooden plate using a 3D printed piece.</p>

                <img class="img w-50" src="images/hackathon/deur.png">
                <div class="m-5"></div>
                <video class="owl-video-playing w-50" controls>
                  <source src="images/hackathon/deur.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>

                <h2>Control Room</h2>
                <p>This room was designed by Maarten Van Neyghem.</p>
                <p>The control room is the most central room in the castle. This room is used to start/stop the game, this room can also play sounds or display a timer.</p>

                <img class="img w-100" src="images/hackathon/controle.jpg">
                <h3>Communication between the control room and the other rooms</h3>
                <p>Each puzzle/room has its own Arduino UNO. These Arduinos are all connected to an Arduino Mega in the control room via a Serial connection. Since an Arduino Mega has 4 Serial connection ports (Serial, Serial1, Serial2, Serial3), hardware serial can be used everywhere. This is necessary as Software Serial has some limitations that make programming a lot more difficult.</p>
                <p>These serial connections can be used to forward commands to and from the control rooms. This is a big advantage over, for example, a simpler solution via a HIGH/LOW pin.</p>
                <p>The connecting wires are hidden through holes in between the different rooms.</p>
                <p>Some commands are:</p>
                <ul>
                  <li>Control -> Room: Start the room (g:start)</li>
                  <li>Control -> Room: The timer has ended (g:lose)</li>
                  <li>Control -> Room: The complete game has been solved (g:win)</li>
                  <li>Control -> Room: Reset for the next game (g:reset)</li>
                  <li>Room -> Control: This room is solved (g:complete)</li>
                  <li>Room -> Control: Play a sound (g:sound:&lt;index&gt;)</li>
                </ul>
                <p>The use of these commands has been completely abstracted away from the programmers. All communication is done via 2 self-written libraries that contain a number of function calls and callback functions to easily send and receive commands.</p>
                <img class="img w-100" src="images/hackathon/diagram.png">

                <h3>Play sound</h3>
                <p>Playing audio files can be done via a DFPlayer. This DFPlayer plays MP3 files from an SD card. However, we've noticed that buffering causes audio playback to have a slight delay, sometimes causing the sound to be out of sync with the operations.</p>
                <h3>Hardware</h3>
                <ul>
                  <li>1x 4-digits 7-segment display</li>
                  <li>1x DFPlayer</li>
                  <li>2x Speakers</li>
                  <li>1x Start button</li>
                  <li>1x Arduino Mega</li>
                </ul>

                <h2>Room 1</h2>
                <p>This room was designed by Simon Devisch.</p>
                <video class="owl-video-playing w-50" controls>
                  <source src="images/hackathon/kamer1.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <h3>Concept</h3>
                <p>In the first room you play the game "Simon Says". Here you will see an LED pattern and you have to replicate the pattern in the correct order each time. In each level of this puzzle, one more color is added to the pattern. If you make a mistake you have to start over!</p>
                <h3>Hardware</h3>
                <p>This puzzle includes following components:</p>
                <ul>
                  <li>4x Push buttons (red, yellow, green, blue)</li>
                  <li>4x LEDs (red, yellow, green, blue)</li>
                  <li>1x RGB LED-Strip</li>
                  <li>1x Servo</li>
                  <li>1x Laser</li>
                  <li>1x Arduino UNO</li>
                </ul>
                <h3>Scheme</h3>
                <img class="img w-100" src="images/hackathon/kamer1-schema.png">

                <h2>Room 2</h2>
                <p>This room was designed by Mathias De Jaeger.</p>
                <video class="owl-video-playing w-100" controls>
                  <source src="images/hackathon/kamer2.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <h3>Concept</h3>
                <p>In the second room you get an anagram of different letters on an LCD display. The idea is for you to decipher the anagram and use a dial on a potentiometer to relay the answer. Moving the button scrolls through the alphabet. With a white button you confirm a character and with a red button you confirm the answer. The LCD will then tell you whether your answer is correct or incorrect.</p>
                <h3>Hardware</h3>
                <p>This puzzle includes following components:</p>
                <ul>
                  <li>1x LCD-display</li>
                  <li>2x Push buttons</li>
                  <li>1x Potentiometer (50kOhm)</li>
                  <li>1x RGB LED-Strip</li>
                  <li>1x Servo</li>
                  <li>1x Arduino UNO</li>
                </ul>
                <h3>Scheme</h3>
                <img class="img w-100" src="images/hackathon/kamer2-schema.png">

                <h2>Room 3</h2>
                <p>This room was designed by Maarten Van Neyghem.</p>
                <video class="owl-video-playing w-50" controls>
                  <source src="images/hackathon/kamer1.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <h3>Hardware</h3>
                <p>This puzzle includes following components</p>
                <ul>
                  <li>1x LED matrix</li>
                  <li>1x IR receiver sensor</li>
                  <li>1x RGB LED-Strip</li>
                  <li>1x Servo</li>
                  <li>1x Arduino UNO</li>
                </ul>
                <h3>Scheme</h3>
                <img class="img w-100" src="images/hackathon/kamer3-schema.png">

                <h2>Room 4</h2>
                <p>Designed by Anthony Tacquet</p>

                <video class="owl-video-playing w-100" controls>
                  <source src="images/hackathon/kamer4.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <div class="m-5"></div>
                <img class="img w-50" src="images/hackathon/kamer4-kaartjes.jpg">
                <h3>Concept</h3>
                <p>This is the last room, if you can solve this puzzle you will get access to the laser and you can chase the ghost from the castle. A number of people were murdered in this room and their ghosts still haunt this room. Place the ghosts' name tags in the floor in the correct location, using a messy floor, to activate the laser, then use the mirrors in each room to destroy the ghost!</p>
                <video class="owl-video-playing w-100" controls>
                  <source src="images/hackathon/kamer4-laser.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
                <h3>Hardware</h3>
                <p>This puzzle includes the following components:</p>
                <ul>
                  <li>4x Micro switches</li>
                  <li>1x Light sensor</li>
                  <li>1x RGB-Strip</li>
                  <li>1x Arduino UNO</li>
                </ul>
                <p>Since this is the last room, there is no servo to open a door. The game is successfully solved when the player can aim the laser at the light sensor.</p>
                <h3>Scheme</h3>
                <img class="img w-100" src="images/hackathon/kamer4-schema.png">

                <h2>Code</h2>
                <h3>Control Room</h3>
                <pre>
                  <code class="text-light">
                  #include &lt;Arduino.h>&gt;
                  #include &lt;SoftwareSerial.h>&gt;
                  #include &lt;Button.h>&gt;
                  #include &lt;Servo.h>&gt;
                  #include &lt;RoomConnection.h>&gt;
                  #include &lt;TM1637.h>&gt;
                  #include &lt;DFRobotDFPlayerMini.h>&gt;
                  #include &lt;Globals.h>&gt;

                  #define PIN_GAME_BUTTON 12
                  #define PIN_DISPLAY_DIO 8
                  #define PIN_DISPLAY_CLK 9
                  #define PIN_PLAYER_RX 10
                  #define PIN_PLAYER_TX 11
                  #define PIN_BUZZER 2

                  #define GAME_DURATION 600000UL

                  // Seriële connecties naar alle kamers
                  RoomConnection room1("kamer1", Serial);
                  RoomConnection room2("kamer2", Serial1);
                  RoomConnection room3("kamer3", Serial2);
                  RoomConnection room4("kamer4", Serial3);

                  // Display
                  TM1637 display(PIN_DISPLAY_CLK, PIN_DISPLAY_DIO);

                  // Software Serial voor de DFPlayer
                  SoftwareSerial playerSerial(PIN_PLAYER_RX, PIN_PLAYER_TX);
                  // DFPlayer
                  DFRobotDFPlayerMini player;

                  // Status van de game.
                  // Mogelijke opties zijn:
                  // - lost: de speler heeft de game verloren
                  // - won: de speler heeft de game gewonnen
                  // - running: het spel loopt
                  // - idle: het spel is nog niet gestart
                  // - resetting: het spel is aan het resetten
                  String gameStatus = "idle";

                  // De huidige actieve kamer van de game.
                  int gameRoom = 1;

                  // Start tijdstip (in milliseconden)
                  unsigned long gameStart = 0;

                  // Eind tijdstip (in milliseconden)
                  unsigned long gameEnd = 0;

                  // Reset tijdstip (in milliseconden)
                  unsigned long gameReset = 0;

                  // De button die de game start/stopt.
                  Button gameButton(PIN_GAME_BUTTON);

                  /**
                   * Start de game.
                   */
                  void startGame() {
                    // Reset de game.
                    gameStatus = "running";
                    gameRoom = 1;
                    gameStart = millis();

                    // Start de eerste kamer
                    room1.start();
                  }

                  /**
                   * Reset de game.
                   * Reset alle kamers naar hun beginstatus.
                   */
                  void resetGame() {
                    gameStatus = "resetting";
                    gameRoom = 1;
                    gameStart = 0;
                    gameEnd = 0;
                    gameReset = millis();

                    room1.reset();
                    room2.reset();
                    room3.reset();
                    room4.reset();
                  }

                  /**
                   * Verlies de game.
                   * Wanneer de gebruiker het spel heeft verloren door de timer die verloopt.
                   */
                  void loseGame() {
                    gameStatus = "lost";
                    gameEnd = millis();

                    room1.lose();
                    room2.lose();
                    room3.lose();
                    room4.lose();
                  }

                  /**
                   * Win de game.
                   * Wanneer de gebruiker het spel heeft gewonnen door alle kamers te bereiken.
                   */
                  void winGame() {
                    gameStatus = "won";
                    gameEnd = millis();

                    room1.win();
                    room2.win();
                    room3.win();
                    room4.win();
                  }

                  /**
                   * Idle de game.
                   * Wanneer het spel wacht om gestart te worden
                   */
                  void idleGame() {
                    gameStatus = "idle";
                    gameReset = 0;
                  }

                  /**
                   * Wanneer de gebruiker op de game button in de controlekamer drukt.
                   */
                  void onGameButtonClick() {
                    // Als de game idle is, start de game.
                    if (gameStatus == "idle") {
                      startGame();
                      return;
                    }

                    // Als de game running is, stop de game.
                    if (gameStatus == "running") {
                      loseGame();
                      return;
                    }
                  }

                  /**
                   * Display a number on the display.
                   * @param number
                   */
                  void displayNumber(int number) {
                    display.display(3, number % 10);
                    display.display(2, number / 10 % 10);
                    display.display(1, number / 100 % 10);
                    display.display(0, number / 1000 % 10);
                  }

                  /**
                   * Toon de resterende tijd op de display.
                   */
                  void renderDisplay() {
                    // Als de game niet aan het lopen is zet de display op 0.
                    if (gameStatus != "running") {
                      display.display(0, 0);
                      display.display(1, 0);
                      display.display(2, 0);
                      display.display(3, 0);
                      return;
                    }

                    // Bereken de resterende tijd in milliseconden.
                    signed long remainingTime = GAME_DURATION - (millis() - gameStart);

                    // Bereken het aantal minuten en seconden.
                    unsigned long minutes = remainingTime / 1000 / 60;
                    unsigned long seconds = remainingTime / 1000 % 60;

                    // Render de tijd
                    display.display(0, minutes / 10);
                    display.display(1, minutes % 10);
                    display.display(2, seconds / 10);
                    display.display(3, seconds % 10);
                  }

                  /**
                   * Wanneer de Arduino gestart wordt.
                   */
                  void setup()
                  {
                    // Start seriële communicatie met de kamer Arduino's.
                    room1.setup();
                    room2.setup();
                    room3.setup();
                    room4.setup();

                    // Setup de display
                    display.init();
                    display.set(7);

                    // Setup de DFPlayer
                    playerSerial.begin(9600);
                    Serial.println();
                    Serial.println(F("DFRobot DFPlayer Mini Demo"));
                    Serial.println(F("Initializing DFPlayer ... (May take 3~5 seconds)"));

                    if (!player.begin(playerSerial)) {
                      Serial.println(F("Unable to begin:"));
                      Serial.println(F("1.Please recheck the connection!"));
                      Serial.println(F("2.Please insert the SD card!"));
                      while(true);
                    }
                    Serial.println(F("DFPlayer Mini online."));
                    player.volume(20);

                    // Pull-up resistor voor de game button.
                    pinMode(PIN_GAME_BUTTON, INPUT_PULLUP);

                    // Reset alle kamers initieel
                    resetGame();

                    // Wanneer een kamer1 opgelost is.
                    room1.onComplete([]() {
                      if (gameStatus == "running" && gameRoom == 1) {
                        gameRoom = 2;
                        room2.start();
                      }
                    });

                    // Wanneer een kamer2 opgelost is.
                    room2.onComplete([]() {
                      if (gameStatus == "running" && gameRoom == 2) {
                        gameRoom = 3;
                        room3.start();
                      }
                    });

                    // Wanneer een kamer3 opgelost is.
                    room3.onComplete([]() {
                      if (gameStatus == "running" && gameRoom == 3) {
                        gameRoom = 4;
                        room4.start();
                      }
                    });

                    // Wanneer een kamer4 opgelost is.
                    room4.onComplete([]() {
                      if (gameStatus == "running" && gameRoom == 4) {
                        winGame();
                      }
                    });

                    // Wanneer de kamers een geluid signaal geven.
                    room1.onSound([](int sound) {
                      player.playMp3Folder(sound);
                    });
                    room2.onSound([](int sound) {
                      player.playMp3Folder(sound);
                    });
                    room3.onSound([](int sound) {
                      player.playMp3Folder(sound);
                    });
                    room4.onSound([](int sound) {
                      player.playMp3Folder(sound);
                    });
                  }

                  /**
                   * Loop die elke milliseconde wordt aangeroepen.
                   */
                  void loop()
                  {
                    // Voer de loop uit voor alle kamer controllers
                    room1.loop();
                    room2.loop();
                    room3.loop();
                    room4.loop();

                    // Display de huidige tijd
                    renderDisplay();

                    // Wanneer de gamebutton ingedrukt wordt.
                    if (gameButton.pressed()) {
                      onGameButtonClick();
                    }

                    // Als de game running is, check of de timer is verlopen.
                    if (gameStatus == "running") {
                      if (millis() - gameStart > GAME_DURATION) {
                        loseGame();
                      }
                    }

                    // Als de game verloren of gewonnen is, reset de game na 5 seconden.
                    if (gameStatus == "lost" || gameStatus == "won") {
                      if (millis() - gameEnd > 5000) {
                        resetGame();
                      }
                    }

                    // Als de game aan het resetten is, zet de game op idle na 5 seconden.
                    if (gameStatus == "resetting") {
                      if (millis() - gameReset > 5000) {
                        idleGame();
                      }
                    }
                  }
                  </code>
                </pre>


                <h3>Room 1</h3>

                <pre>
                  <code class="text-light">
                  #include &lt;Arduino.h&gt;
                  #include &lt;FireTimer.h&gt;
                  #include &lt;Door.h&gt;
                  #include &lt;LedStrip.h&gt;
                  #include &lt;ControlRoomConnection.h&gt;
                  #include &lt;Wire.h&gt;

                  const int MaxLevel = 8;
                  int sequence[MaxLevel];
                  int your_sequence[MaxLevel];
                  int level = 1;

                  bool active = false; // default is false
                  FireTimer msTimer;

                  // led innput
                  int ledblue = 2;
                  int ledyellow = 4;
                  int ledred = 5;
                  int ledgreen = 3;
                  // button input
                  int buttonblue = 10;
                  int buttonyellow = 12;
                  int buttonred = 13;
                  int buttongreen = 11;
                  // int buttonstart = 8;

                  LedStrip ledStrip(8, 9, 7); // ledStrip
                  Door door(6);               // door

                  ControlRoomConnection controlRoom(Serial); // Connectie met de controle kamer

                  void setup()
                  {
                    // Serial.begin(115200);

                    door.setup();
                    // door.open();
                    ledStrip.setup();
                    controlRoom.setup();

                    // Wanneer een reset signaal ontvangen wordt van de controle kamer.
                    controlRoom.onReset([]()
                                        {
                      ledStrip.setBlinkColor(COLOR_BLUE, 3000, 200, COLOR_OFF);
                      door.close();
                      active = false; });

                    // Wanneer een start signaal ontvangen wordt van de controle kamer.
                    controlRoom.onStart([]()
                                        {
                      ledStrip.setColor(COLOR_BLUE);
                      active = true; });

                    // Wanneer een verlies signaal ontvangen wordt van de controle kamer.
                    controlRoom.onLose([]()
                                       {
                      ledStrip.setBlinkColor(COLOR_RED, 5000, 200, COLOR_RED);
                      active = false; });

                    // Wanneer een win signaal ontvangen wordt van de controle kamer.
                    controlRoom.onWin([]()
                                      {
                      ledStrip.setBlinkColor(COLOR_GREEN, 5000, 200, COLOR_GREEN);
                      active = false; });

                    msTimer.begin(1000);
                    pinMode(buttonblue, INPUT_PULLUP);
                    pinMode(buttonyellow, INPUT_PULLUP);
                    pinMode(buttonred, INPUT_PULLUP);
                    pinMode(buttongreen, INPUT_PULLUP);

                    pinMode(ledblue, OUTPUT);
                    pinMode(ledyellow, OUTPUT);
                    pinMode(ledred, OUTPUT);
                    pinMode(ledgreen, OUTPUT);
                    digitalWrite(ledblue, LOW);
                    digitalWrite(ledyellow, LOW);
                    digitalWrite(ledred, LOW);
                    digitalWrite(ledgreen, LOW);
                  }

                  void show_sequence()
                  {
                    digitalWrite(ledblue, LOW);
                    digitalWrite(ledyellow, LOW);
                    digitalWrite(ledred, LOW);
                    digitalWrite(ledgreen, LOW);
                    for (int i = 0; i < level; i++)
                    {
                      digitalWrite(sequence[i], HIGH);
                      msTimer.update(1000);
                      digitalWrite(sequence[i], LOW);
                      msTimer.update(1000);
                    }
                  }
                  void wrong_sequence()
                  {
                    level = 1;
                    ledStrip.setBlinkColor(COLOR_RED, 5000, 200, COLOR_RED);
                  }
                  void right_sequence()
                  {
                    // ledstrip blinks green
                    if (level < MaxLevel)
                    {
                      level++;
                    }
                    else
                    {
                      door.open();
                      controlRoom.complete();
                      ledStrip.setBlinkColor(COLOR_GREEN, 2000, 200, COLOR_GREEN);
                    }
                  }

                  void get_sequence()
                  {
                    int flag = 0; // this flag indicates if the sequence is correct
                    for (int i = 0; i < level; i++)
                    {
                      flag = 0;
                      while (flag == 0)
                      {
                        if (digitalRead(buttonblue) == LOW)
                        {
                          digitalWrite(ledblue, HIGH);
                          your_sequence[i] = ledblue;
                          flag = 1;
                          msTimer.fire();
                          if (your_sequence[i] != sequence[i])
                          {
                            wrong_sequence();
                            return;
                          }
                          digitalWrite(ledblue, LOW);
                        }
                        if (digitalRead(buttonyellow) == LOW)
                        {
                          digitalWrite(ledyellow, HIGH);
                          your_sequence[i] = ledyellow;
                          flag = 1;
                          msTimer.fire();
                          // msTimer.update(200);
                          if (your_sequence[i] != sequence[i])
                          {
                            wrong_sequence();
                            return;
                          }
                          digitalWrite(ledyellow, LOW);
                        }
                        if (digitalRead(buttonred) == LOW)
                        {
                          digitalWrite(ledred, HIGH);
                          Serial.println("roodin");
                          your_sequence[i] = ledred;
                          flag = 1;
                          msTimer.fire();
                          // msTimer.update(200);
                          if (your_sequence[i] != sequence[i])
                          {
                            wrong_sequence();
                            return;
                          }
                          digitalWrite(ledred, LOW);
                        }
                        if (digitalRead(buttongreen) == LOW)
                        {
                          digitalWrite(ledgreen, HIGH);
                          your_sequence[i] = ledgreen;
                          flag = 1;
                          msTimer.fire();
                          if (your_sequence[i] != sequence[i])
                          {
                            wrong_sequence();
                            return;
                          }
                          digitalWrite(ledgreen, LOW);
                        }
                      }
                    }
                    right_sequence();
                  }

                  void generate_sequence()
                  {
                    randomSeed(millis()); // maken het random
                    for (int i = 0; i < MaxLevel; i++)
                    {
                      sequence[i] = random(2, 6);
                    }
                    Serial.println(sequence[MaxLevel]);
                    Serial.println("test");

                  }

                  void loop()
                  {

                    door.loop();
                    ledStrip.loop();
                    controlRoom.loop();

                    if (msTimer.fire())
                    {

                      if (active)
                      {
                        if (level == 1)
                          generate_sequence();
                        if (digitalRead(buttonred) == LOW || level != 1)
                        {
                          Serial.println("buttonlow");
                          show_sequence();
                          get_sequence(); // wacht op antwoord
                        }
                      }
                    }
                  }
                  </code>
                </pre>

                <h3>Room 2</h3>
                <h4>main.cpp</h4>
                <pre>
                  <code class="text-light">
                    #include &lt;Arduino.h&gt;
                    #include &lt;Door.h&gt;
                    #include &lt;LedStrip.h&gt;
                    #include &lt;ControlRoomConnection.h&gt;

                    // LED strip
                    LedStrip ledStrip(2, 3, 4);
                    // Door
                    Door door(9);
                    // Connectie met de controle kamer
                    ControlRoomConnection controlRoom(Serial);
                    // Spel is actief
                    bool active = true;
                    // Mijn Code
                    #define select 3
                    #define enter 4
                    #define rood 5  //---
                    #define groen 6 //   |-- Ledstrip kleuren
                    #define blauw 7 //---
                    String programma[] = {"SOS", "ICT", "WIN"};
                    int randomNr;
                    int tel = 0;
                    String woord;
                    #include "FireTimer.h"
                    FireTimer timerSos;
                    FireTimer timerSos2;
                    FireTimer hint;
                    FireTimer wrong;
                    #include &lt;SoftwareSerial.h&gt;
                    #include &lt;Wire.h&gt;
                    #include &lt;LiquidCrystal_I2C.h&gt;
                    #include "Printen.h"
                    #include "Morse.h"

                    void setup()
                    {
                      door.setup();
                      ledStrip.setup();
                      controlRoom.setup();
                      Serial.println("Setup!");
                      // Wanneer een reset signaal ontvangen wordt van de controle kamer.
                      controlRoom.onReset([]()
                                          {
                        ledStrip.setBlinkColor(COLOR_BLUE, 3000, 200, COLOR_OFF);
                        door.close();
                        active = false; });
                      // Wanneer een start signaal ontvangen wordt van de controle kamer.
                      controlRoom.onStart([]()
                                          {
                        ledStrip.setColor(COLOR_BLUE);
                        active = true;
                        Serial.println("Hallo!"); });
                      // Wanneer een verlies signaal ontvangen wordt van de controle kamer.
                      controlRoom.onLose([]()
                                         {
                        ledStrip.setBlinkColor(COLOR_RED, 5000, 200, COLOR_RED);
                        active = false;

                        Serial.println("LOST!"); });
                      // Wanneer een win signaal ontvangen wordt van de controle kamer.
                      controlRoom.onWin([]()
                                        {
                        ledStrip.setBlinkColor(COLOR_GREEN, 5000, 200, COLOR_GREEN);
                        active = false; });
                      // Mijn Code
                      // Morse
                      pinMode(select, INPUT);
                      digitalWrite(select, LOW);
                      pinMode(enter, INPUT);
                      digitalWrite(enter, LOW);
                      pinMode(0, INPUT);
                      pinMode(9, OUTPUT);
                      randomSeed(analogRead(0));
                      randomNr = random(3);
                      pinMode(1, INPUT);
                      // lcd display
                      lcd.init();
                      lcd.init();
                      lcd.backlight();
                      // led
                      pinMode(blauw, OUTPUT);
                      pinMode(rood, OUTPUT);
                      pinMode(groen, OUTPUT);
                    }

                    void loop()
                    {
                      door.loop();
                      ledStrip.loop();
                      controlRoom.loop();
                      if (active)
                      {
                        door.close();
                        door.open();
                        printe();
                        if (randomNr == 0)
                        {
                          if (fase < 3 || fase >= 6 && fase < 9)
                          {
                            s();
                          }
                          if (fase >= 3 && fase < 6)
                          {
                            o();
                          }
                          if (fase >= 9)
                          {
                            wachten();
                          }
                        }
                        else if (randomNr == 1)
                        {
                          if (fase < 2)
                          {
                            i();
                          }
                          if (fase >= 2 && fase < 6)
                          {
                            c();
                          }
                          if (fase >= 6 && fase < 7)
                          {
                            t();
                          }
                          if (fase >= 7)
                          {
                            wachten();
                          }
                        }
                        else if (randomNr == 2)
                        {
                          if (fase < 3)
                          {
                            w();
                          }
                          if (fase >= 3 && fase < 5)
                          {
                            i();
                          }
                          if (fase >= 5 && fase < 7)
                          {
                            n();
                          }
                          if (fase >= 7)
                          {
                            wachten();
                          }
                        }
                      }
                    }
                  </code>
                </pre>

                <h4>Printen.h</h4>
                <pre>
                  <code class="text-light">
                    const char chars[] = {'A', 'A', 'B', 'B', 'C', 'C', 'D', 'D', 'E', 'E', 'F', 'F', 'G', 'G',
                    'H', 'H', 'I', 'I', 'J', 'J', 'K', 'K', 'L',
                    'L', 'M', 'M', 'N', 'N', 'O', 'O', 'P', 'P', 'Q', 'Q', 'R', 'R', 'S',
                    'S', 'T', 'T', 'U', 'U', 'V', 'V', 'W', 'W', 'X', 'X', 'Y', 'Y', 'Z', 'Z'};
                    LiquidCrystal_I2C lcd(0x27, 20, 4);
                    unsigned long startTijd = 0;
                    unsigned long huidigeTijd = 0;
                    const int periodeLang = 500;
                    const int periodeKort = 200;
                    int teller = 0;
                    int tijd = 250;
                    int stap = 0;
                    boolean wacht = false;

                    void pulse()
                    {
                      while (tijd > 50)
                      {
                        door.loop();
                        ledStrip.loop();
                        controlRoom.loop();
                        if (timerSos.fire() && stap == 0)
                        {
                          digitalWrite(blauw, LOW);
                          stap = 1;
                          timerSos2.begin(tijd);
                        }
                        if (timerSos2.fire() && stap == 1)
                        {
                          digitalWrite(blauw, HIGH);
                          stap = 0;
                          tijd -= 25;
                          timerSos.begin(tijd);
                        }
                      }
                      stap = 2;
                    }

                    void glitch()
                    {
                      Serial.println(stap);
                      if (timerSos.fire() && stap == 2)
                      {
                        digitalWrite(groen, HIGH);
                        stap++;
                        hint.begin(200);
                      }
                      if (hint.fire() && stap == 3)
                      {
                        digitalWrite(groen, LOW);
                        stap++;
                        timerSos2.begin(400);
                      }
                      if (timerSos2.fire() && stap == 4)
                      {
                        digitalWrite(groen, HIGH);
                        stap++;
                        timerSos.begin(200);
                      }
                      if (timerSos.fire() && stap == 5)
                      {
                        digitalWrite(groen, LOW);
                        stap = 2;
                        timerSos.begin(3000);
                      }
                    }

                    void printe()
                    {
                      digitalWrite(groen, HIGH);
                      digitalWrite(rood, HIGH);
                      float pot = map(analogRead(1), 0, 1023, 0, 52);
                      int valeu = (int)pot;

                      lcd.setCursor(teller, 0);
                      lcd.print(chars[valeu]);
                      Serial.println(chars[valeu]);
                      Serial.println(programma[randomNr]);
                      if (digitalRead(select) == HIGH)
                      {
                        teller++;
                        woord = woord + chars[map(analogRead(1), 0, 1023, 0, 52)];
                      }
                      // Wacht tot knop is losgelaten;
                      while (digitalRead(select) == HIGH)
                      {
                        door.loop();
                        ledStrip.loop();
                        controlRoom.loop();
                      }
                      if (digitalRead(enter) == HIGH)
                      {
                        woord = woord + chars[map(analogRead(1), 0, 1023, 0, 52)];
                        // Wacht tot knop is losgelaten;
                        while (digitalRead(enter) == HIGH)
                        {
                          door.loop();
                          ledStrip.loop();
                          controlRoom.loop();
                        }
                        // Check of het woord correct is
                        stap = 0;
                        tel = 0;
                        Serial.println(woord);
                        Serial.println(stap);
                        while (woord == programma[randomNr])
                        {
                          door.loop();
                          ledStrip.loop();
                          controlRoom.loop();
                          Serial.println("In loop");
                          digitalWrite(blauw, HIGH);
                          digitalWrite(groen, HIGH);
                          while (true)
                          {
                            door.loop();
                            ledStrip.loop();
                            controlRoom.loop();
                            if (stap < 2)
                            {
                              pulse();
                            }
                            if (tel < 10 && stap == 2 && timerSos.fire())
                            {
                              digitalWrite(blauw, LOW);
                              stap++;
                              timerSos2.begin(tijd);
                            }
                            else if (timerSos2.fire() && stap == 3 && tel < 10)
                            {
                              digitalWrite(blauw, HIGH);
                              stap--;
                              tel++;
                              timerSos.begin(tijd);
                            }
                            else if (tel == 10 && stap != 5)
                            {
                              stap = 5;
                              Serial.println("TESTTINGGGGG");
                              digitalWrite(groen, LOW);
                              digitalWrite(blauw, HIGH);
                              lcd.clear();
                              lcd.setCursor(5, 0);
                              lcd.print("CORRECT");
                              lcd.setCursor(0, 1);
                              lcd.print("HAPPY HUNTING :D");
                              timerSos.begin(4000);
                            }
                            else if (stap == 5)
                            {
                              if (timerSos.fire())
                              {
                                timerSos.begin(3000);
                                stap = 2;
                                lcd.clear();
                                door.open();
                                controlRoom.complete();
                                while (true)
                                {
                                  door.loop();
                                  ledStrip.loop();
                                  controlRoom.loop();
                                  glitch();
                                }
                              }
                            }
                          }
                        }
                        // FAIL
                        while (woord != programma[randomNr] && tel < 10)
                        {
                          door.loop();
                          ledStrip.loop();
                          controlRoom.loop();
                          Serial.println("Foute code");
                          Serial.println(stap);
                          Serial.println(tel);
                          if (stap != 2)
                          {
                            digitalWrite(blauw, HIGH);
                            digitalWrite(groen, HIGH);
                            digitalWrite(blauw, HIGH);
                            Serial.println("pulse");
                            while (tel < 10)
                            {
                              door.loop();
                              ledStrip.loop();
                              controlRoom.loop();
                              if (stap < 2)
                              {
                                pulse();
                              }
                              if (tel < 10 && stap == 2 && timerSos.fire())
                              {
                                digitalWrite(blauw, LOW);
                                stap++;
                                timerSos2.begin(tijd);
                              }
                              else if (timerSos2.fire() && stap == 3 && tel < 10)
                              {
                                digitalWrite(blauw, HIGH);
                                stap--;
                                tel++;
                                timerSos.begin(tijd);
                              }
                            }
                            digitalWrite(blauw, HIGH);
                            digitalWrite(groen, HIGH);
                            digitalWrite(rood, LOW);
                            lcd.clear();
                            lcd.setCursor(5, 0);
                            lcd.print("WRONG!");
                            stap = 1;
                            wrong.begin(2500);
                            while (stap != 0)
                            {
                              door.loop();
                              ledStrip.loop();
                              controlRoom.loop();
                              if (wrong.fire() && stap == 1)
                              {
                                lcd.clear();
                                lcd.setCursor(2, 0);
                                lcd.print("THE GHOST IS");
                                lcd.setCursor(1, 1);
                                lcd.print("GETTING CLOSER!");
                                stap++;
                                wrong.update(1000);
                              }
                              else if (wrong.fire() && stap == 2)
                              {
                                lcd.clear();
                                teller = 0;
                                stap = 0;
                                woord = "";
                                Serial.println(stap);
                              }
                            }
                          }
                        }
                      }
                    }
                  </code>
                </pre>

                <h4>Morse.h</h4>

                <pre>
                  <code class="text-light">
                  int fase = 1;

                  void kort() {
                    huidigeTijd = millis();
                    if (huidigeTijd - startTijd >= periodeKort) {
                      startTijd = huidigeTijd;
                      if (digitalRead(blauw)) {
                        digitalWrite(blauw, LOW);
                        fase++;
                      } else {
                        digitalWrite(blauw, HIGH);
                      }
                    }
                  }

                  void lang() {
                    huidigeTijd = millis();
                    if (huidigeTijd - startTijd >= periodeLang) {
                      startTijd = huidigeTijd;
                      if (digitalRead(blauw)) {
                        digitalWrite(blauw, LOW);
                        fase++;
                      } else {
                        digitalWrite(blauw, HIGH);
                      }
                    }
                  }

                  void wachten() {
                    digitalWrite(blauw, HIGH);
                    huidigeTijd = millis();
                    if (huidigeTijd - startTijd >= 1000) {
                      startTijd = huidigeTijd;
                      if (wacht) {
                        wacht = false; fase = 0;
                      }
                      else {
                        wacht = true;
                      }
                    }
                  }

                  //....................................................................
                  //Alphabet
                  void a() {
                    kort();
                    lang();
                  } void b() {
                    lang();
                    kort(); kort(); kort();
                  } void c() {
                    lang(); kort(); lang(); kort();
                  } void d() {
                    lang(); kort(); kort();
                  } void e() {
                    kort();
                  } void f() {
                    kort(); kort(); lang(); kort();
                  } void g() {
                    lang(); lang(); kort();
                  } void h() {
                    kort(); kort(); kort(); kort();
                  } void i() {
                    kort(); kort();
                  } void j() {
                    kort(); lang(); lang(); lang();
                  } void k() {
                    lang(); kort(); lang();
                  } void l() {
                    kort(); lang(); kort(); kort();
                  } void m() {
                    lang(); lang();
                  } void n() {
                    lang(); kort();
                  } void o() {
                    lang(); lang(); lang(); !wacht;
                  } void p() {
                    kort(); lang(); lang(); kort();
                  } void q() {
                    lang(); lang(); kort(); lang();
                  } void r() {
                    kort(); lang(); kort();
                  } void s() {
                    kort(); kort(); kort(); !wacht;
                  } void t() {
                    lang();
                  } void u() {
                    kort(); kort(); lang();
                  } void v() {
                    kort(); kort(); kort(); lang();
                  } void w() {
                    kort(); lang(); lang();
                  } void x() {
                    lang(); kort(); kort(); lang();
                  } void y() {
                    lang(); kort(); lang(); lang();
                  } void z() {
                    lang(); lang(); kort(); kort();
                  }
                  </code>
                </pre>

                <h3>External Libraries</h3>
                <ul>
                  <li>madleech/Button@^1.0.0</li>
                  <li>seeed-studio/Grove 4-Digit Display@^1.0.0</li>
                  <li>powerbroker2/FireTimer@^1.0.5</li>
                  <li>dfrobo/DFRobotDFPlayerMini@^1.0.5</li>
                  <li>z3t0/IRremote@^3.6.1</li>
                  <li>arduino-libraries/Servo@^1.1.8</li>
                  <li>wayoda/LedControl@^1.0.6</li>
                  <li>marcoschwartz/LiquidCrystal_I2C@^1.1.4</li>
                </ul>
                <div class="tag-widget post-tag-container mb-5 mt-5">
                  <div class="tagcloud">
                    <a href="#" class="tag-cloud-link">Life</a>
                    <a href="#" class="tag-cloud-link">Sport</a>
                    <a href="#" class="tag-cloud-link">Tech</a>
                    <a href="#" class="tag-cloud-link">Travel</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div><!-- END COLORLIB-MAIN -->
</div><!-- END COLORLIB-PAGE -->

<!-- loader -->
<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


<script src="js/jquery.min.js"></script>
<script src="js/jquery-migrate-3.0.1.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/jquery.waypoints.min.js"></script>
<script src="js/jquery.stellar.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/jquery.animateNumber.min.js"></script>
<script src="js/scrollax.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
<script src="js/google-map.js"></script>
<script src="js/main.js"></script>

</body>
</html>